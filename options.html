<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
  <meta name="color-scheme" content="light dark">
  <title>DelugeFlow Options</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <h2>DelugeFlow Options</h2>

  <div id="connections">
    <h3>Server Connections</h3>
    <div id="connection-list"></div>
    <button class="add-server-btn" id="add-server">Add Server</button>
  </div>

  <div class="accordion">
    <div class="accordion-header">
      <h2>Options</h2>
      <div class="accordion-icon">▼</div>
    </div>
    <div class="accordion-content">
      <div class="opts">
        <label title="Display a notification within the webpage when a torrent is added successfully or when an error occurs">
          <input type="checkbox" id="inpage_notification" class="option_field"/>
          Show in-page download notifications
        </label>
      </div>
      <div class="opts">
        <label title="Add 'DelugeFlow' to the browser's right-click context menu">
          <input type="checkbox" id="enable_context_menu" class="option_field"/>
          Enable right-click menu integration
        </label>
      </div>
      <div class="opts">
        <label title="Include additional options in the right-click menu to select labels and download location">
          <input type="checkbox" id="enable_context_menu_with_options" class="option_field"/>
          Show advanced options in right-click menu
        </label>
      </div>
      <div class="opts">
        <label title="Hold Ctrl (Command on Mac) and click on a torrent link to send it directly to Deluge">
          <input type="checkbox" id="enable_keyboard_macro" class="option_field"/>
          Enable Ctrl+Click shortcut for quick adding
        </label>
      </div>
      <div class="opts">
        <label title="Click directly on a torrent link to send it to Deluge (use with caution as it overrides normal link behavior)">
          <input type="checkbox" id="enable_leftclick" class="option_field"/>
          Enable single-click torrent capture
        </label>
      </div>
      <div class="opts">
        <label title="Automatically intercept .torrent file downloads and send them directly to Deluge instead of downloading to your computer">
          <input type="checkbox" id="intercept_torrent_downloads" class="option_field"/>
          Automatically send .torrent downloads to Deluge
        </label>
      </div>
      <div class="opts">
        <label title="Set the width of the popup window (320-800 pixels)">
          Popup Width:
          <input type="number" id="popup_width" min="320" max="800" step="20" class="option_field" style="width: 80px; margin-left: 10px;"/>
          px
        </label>
      </div>
      <div class="opts">
        <label title="Set the height of the torrent list area (300-800 pixels)">
          Popup Height:
          <input type="number" id="popup_height" min="300" max="800" step="20" class="option_field" style="width: 80px; margin-left: 10px;"/>
          px
        </label>
      </div>
    </div>
  </div>

  <div class="accordion">
    <div class="accordion-header">
      <h2>Advanced</h2>
      <div class="accordion-icon">▼</div>
    </div>
    <div class="accordion-content">
      <div class="opts">
        <label title="Send browser cookies to the Deluge server when adding torrents - useful for private trackers that require authentication">
          <input type="checkbox" id="send_cookies" class="option_field"/>
          Forward browser cookies to Deluge server
        </label>
      </div>
      <div class="opts">
        <label title="Enable detailed logging in the browser console for troubleshooting issues">
          <input type="checkbox" id="enable_debug_logging" class="option_field"/>
          Enable detailed debug logging
        </label>
      </div>
      <div class="textinput opts">
        <label title="Custom regular expression pattern to identify torrent links on webpages. Leave empty to use the default pattern that matches most common torrent sites">
          Custom torrent link pattern:
          <br/>
          <input type="text" id="link_regex" size="60" class="option_field"/>
        </label>
        <br/>
        <span>
          <small>Regular expression used to identify torrent links. Leave blank for default pattern.</small>
        </span>
      </div>
    </div>
  </div>

  <script type="text/template" id="connection-string-tmpl">
  <div class="connection-container" data-index="{{>index}}">
    <div class="connection-row">
      <div class="field-group">
        <label for="url-{{>index}}">Server URL</label>
        <input type="text" id="url-{{>index}}" name="url" class="option_field url-input" placeholder="http://localhost/user/deluge" value="{{>url}}"/>
      </div>
      <div class="field-group">
        <label for="pass-{{>index}}">Password</label>
        <input type="password" id="pass-{{>index}}" name="pass" class="option_field pass-input" placeholder="WebUI Password" value="{{>pass}}"/>
      </div>
      <div class="field-group">
        <label for="label-{{>index}}">Default Label</label>
        <select id="label-{{>index}}" name="default_label" class="option_field default-label-select" data-server-index="{{>index}}" title="Default Label">
          <option value="">No Label</option>
        </select>
      </div>
      <div class="field-group controls-group">
        <label class="server-label">Server {{>index}}</label>
        <div class="connection-controls">
          <button type="button" class="primary-toggle {{?isPrimary}}primary{{??}}not-primary{{/??}}">
            {{?isPrimary}}Primary{{??}}Make Primary{{/??}}
          </button>
          <button type="button" class="remove">Remove</button>
        </div>
      </div>
    </div>
  </div>
  </script>

  <script type="text/javascript" src="lib/logger.js"></script>
  <script type="text/javascript" src="lib/controller_communicator.js"></script>
  <script type="module" src="build-ts/options.js"></script>
</body>
</html>
